<!-- Navbar -->
<nav class="navbar navbar-expand-lg shadow-sm" [ngClass]="{'bg-light': !isDarkMode, 'bg-dark navbar-dark': isDarkMode}">
  <div class="container-fluid align-items-center justify-content-between">

    <!-- Logo -->
    <a class="navbar-brand d-flex align-items-center" routerLink="/front-banner">
      <img src="assets/images/ngstore logo.png" alt="logo" width="120" height="80" class="me-2" />
    </a>

    <!-- Toggler -->
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
      <span class="navbar-toggler-icon"></span>
    </button>

    <!-- Navbar content -->
    <div class="collapse navbar-collapse" id="navbarNav">

      <!-- Location Select (Static, styled like real app) -->
      <div class="location-select me-3 d-flex align-items-center">
        <i class="fa-solid fa-location-dot location-icon"></i>
        <div class="location-dropdown-wrapper">
          <select class="form-select form-select-sm location-dropdown">
            <option disabled selected><i class="fa-solid fa-location-crosshairs"></i>Deliver to this location</option>
            <option value="Bangalore, India">Bangalore, India</option>
            <option value="Gurugram, India">Gurugram, India</option>
            <option value="Delhi, India">Delhi, India</option>
          </select>
        </div>
      </div>


      <!-- Navbar Links -->
      <ul class="navbar-nav mx-auto mb-2 mb-lg-0">
        <li class="nav-item"><a class="nav-link" routerLink="/home-banner">Home</a></li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" data-bs-toggle="dropdown" routerLink="/home">Products</a>
          <ul class="dropdown-menu">
            <li *ngFor="let c of categories">
              <a class="dropdown-item" (click)="filterByCategory(c); $event.preventDefault()">{{ c }}</a>
            </li>
          </ul>
        </li>
        <li class="nav-item"><a class="nav-link" routerLink="/shop">Shop</a></li>
        <li class="nav-item"><a class="nav-link" routerLink="/about">About</a></li>
        <li class="nav-item"><a class="nav-link" routerLink="/contact">Contact</a></li>
      </ul>

      <!-- Search -->
      <form class="d-flex me-3" (ngSubmit)="onSearch()">
        <div class="input-group">
          <input type="text" class="form-control" placeholder="Search products..." [(ngModel)]="searchQuery"
            name="search" />
          <button class="btn btn-primary" type="submit">
            <i class="fa-solid fa-magnifying-glass"></i>
          </button>
        </div>
      </form>

      <!-- Language Selector + Dark Mode -->
      <div class="d-flex align-items-center me-4 gap-3">

        <!-- Fake select box -->
        <div class="fake-select-box" (click)="openLanguageModal()">
          <i class="fa-solid fa-globe me-1"></i>

          <span class="lang-text">
            {{ getLanguageLabel(selectedLanguage) }}
          </span>

          <i class="fa-solid fa-chevron-down ms-2"></i>
        </div>



        <!-- Dark mode toggle -->
        <button class="btn btn-outline-secondary btn-sm" (click)="toggleTheme()">
          <i [ngClass]="isDarkMode ? 'fa-regular fa-sun' : 'fa-sharp fa-solid fa-moon'"></i>
        </button>

        <!-- User + Cart -->
        <div class="d-flex align-items-center gap-3">

          <a routerLink="/signin" class="btn btn-primary btn-sm fw-semibold">
            Sign In
          </a>

          <a routerLink="/order" class="nav-action-btn">
            Returns & <br /><b>Orders</b>
          </a>

          <a routerLink="/cart" class="btn btn-outline-danger btn-sm position-relative">
            <i class="fa-solid fa-cart-shopping me-1"></i>
            Cart
            <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">
              {{ carts.length || 0 }}
            </span>
          </a>

          <a routerLink="/user" class="btn btn-outline-secondary btn-sm" title="Account">
            <i class="fa-solid fa-user"></i>
          </a>

        </div>

        <!-- </nav> -->

        <!-- Language Modal -->
        <div class="modal fade" id="languageModal" tabindex="-1" aria-labelledby="languageModalLabel"
          aria-hidden="true">
          <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content language-modal">

              <!-- Header -->
              <div class="modal-header">
                <h5 class="modal-title" id="languageModalLabel">Language Settings</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
              </div>

              <!-- Body -->
              <div class="modal-body">
                <p class="modal-description">
                  Select the language you prefer for browsing, shopping and communications.
                </p>

                <div class="language-options">
                  <div class="form-check language-row" *ngFor="let lang of languages"
                    (click)="selectedLanguage = lang.value">
                    <input class="form-check-input" type="radio" name="language" [value]="lang.value"
                      [(ngModel)]="selectedLanguage" id="{{lang.value}}">
                    <label class="form-check-label" for="{{lang.value}}">
                      {{ lang.label }} - {{ lang.value }}
                    </label>
                  </div>
                </div>
              </div>

              <!-- Footer -->
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" data-bs-dismiss="modal" (click)="saveLanguage()">
                  Save Changes
                </button>
              </div>

            </div>
          </div>
        </div>
