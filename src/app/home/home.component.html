<app-navbar></app-navbar>

<div class="container py-4">
  <h3 class="mb-4 fw-bold text-center">üõçÔ∏è Products</h3>

  <div class="row g-4">
    <div class="col-12 col-sm-6 col-md-4 col-lg-3" *ngFor="let p of filteredProducts">
      <div class="card product-card h-100 shadow-sm">

        <!-- Product Image -->
        <div class="product-img-wrapper">
          <img [src]="p.image || 'https://picsum.photos/300/200'" [alt]="p.title" class="product-img" />
        </div>

        <!-- Card Body -->
        <div class="card-body d-flex flex-column">
          <h6 class="fw-bold text-truncate">{{ p.title }}</h6>
          <p class="price-text">{{ p.price | currency }}</p>

          <!-- Quantity Section -->
          <div class="quantity-wrapper">
            <span class="quantity-label">Qty</span>
            <div class="quantity-controls">
              <button class="qty-btn" (click)="decreaseQty(p)" [disabled]="p.quantity === 1">‚àí</button>
              <span class="qty-value">{{ p.quantity }}</span>
              <button class="qty-btn" (click)="increaseQty(p)">+</button>
            </div>
          </div>

          <!-- Total -->
          <p class="total-price mt-2">Total: {{ p.price * p.quantity | currency }}</p>

          <!-- Add to Cart -->
          <button class="btn add-cart-btn mt-auto" (click)="addToCart(p)">üõí Add to Cart</button>
        </div>

      </div>
    </div>
  </div>

  <!-- Empty State -->
  <div *ngIf="filteredProducts.length === 0" class="text-center mt-5">
    <p class="text-muted">No products found.</p>
  </div>
</div>

<router-outlet></router-outlet>
